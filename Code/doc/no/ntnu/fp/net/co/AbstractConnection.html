<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_29) on Tue Mar 06 12:45:11 CET 2012 -->
<TITLE>
AbstractConnection
</TITLE>

<META NAME="date" CONTENT="2012-03-06">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AbstractConnection";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.State.html" title="enum in no.ntnu.fp.net.co"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?no/ntnu/fp/net/co/AbstractConnection.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AbstractConnection.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
no.ntnu.fp.net.co</FONT>
<BR>
Class AbstractConnection</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by "><B>no.ntnu.fp.net.co.AbstractConnection</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../../no/ntnu/fp/net/co/Connection.html" title="interface in no.ntnu.fp.net.co">Connection</A></DD>
</DL>
<DL>
<DT><B>Direct Known Subclasses:</B> <DD><A HREF="../../../../../no/ntnu/fp/net/co/ConnectionImpl.html" title="class in no.ntnu.fp.net.co">ConnectionImpl</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public abstract class <B>AbstractConnection</B><DT>extends java.lang.Object<DT>implements <A HREF="../../../../../no/ntnu/fp/net/co/Connection.html" title="interface in no.ntnu.fp.net.co">Connection</A></DL>
</PRE>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>mariubje A partial implementation of the Connection-interface. It
         implements partial functionality and some utility functions.</DD>
</DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.State.html" title="enum in no.ntnu.fp.net.co">AbstractConnection.State</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The possible states for a Connection.</TD>
</TR>
</TABLE>
&nbsp;<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;KtnDatagram</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#disconnectRequest">disconnectRequest</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If a FIN has been received, it is stored in disconnectRequest.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#disconnectSeqNo">disconnectSeqNo</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The sequence number used in disconnection.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;KtnDatagram</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#lastDataPacketSent">lastDataPacketSent</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reference to the last data packet sent.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;KtnDatagram</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#lastValidPacketReceived">lastValidPacketReceived</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reference to the last packet received.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#myAddress">myAddress</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local and remote ip-address.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#myPort">myPort</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local and remote port number.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#nextSequenceNo">nextSequenceNo</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The current sequence number used in packets to be sent.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#remoteAddress">remoteAddress</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local and remote ip-address.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#remotePort">remotePort</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local and remote port number.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#RETRANSMIT">RETRANSMIT</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Time between retransmissions.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.State.html" title="enum in no.ntnu.fp.net.co">AbstractConnection.State</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#state">state</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Identifies the state of the connection.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#TIMEOUT">TIMEOUT</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Timeout for receives.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#AbstractConnection()">AbstractConnection</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initialize variables to default values.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;KtnDatagram</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#constructDataPacket(java.lang.String)">constructDataPacket</A></B>(java.lang.String&nbsp;payload)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Construct a datagram with the given payload.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;KtnDatagram</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#constructInternalPacket(Flag)">constructInternalPacket</A></B>(Flag&nbsp;flag)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Construct a datagram with the given flag.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected abstract &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#isValid(KtnDatagram)">isValid</A></B>(KtnDatagram&nbsp;packet)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Test a packet for transmission errors.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;KtnDatagram</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#receiveAck()">receiveAck</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Waits for an ACK or SYN_ACK.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;KtnDatagram</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#receivePacket(boolean)">receivePacket</A></B>(boolean&nbsp;internal)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Receives a packet from the connectionless layer.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#sendAck(KtnDatagram, boolean)">sendAck</A></B>(KtnDatagram&nbsp;packetToAck,
        boolean&nbsp;synAck)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Send an ack or synack for the given packet.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;KtnDatagram</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#sendDataPacketWithRetransmit(KtnDatagram)">sendDataPacketWithRetransmit</A></B>(KtnDatagram&nbsp;packet)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Send a data packet and wait for ack in one operation.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#simplySendPacket(KtnDatagram)">simplySendPacket</A></B>(KtnDatagram&nbsp;packet)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sends a packet.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_no.ntnu.fp.net.co.Connection"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from interface no.ntnu.fp.net.co.<A HREF="../../../../../no/ntnu/fp/net/co/Connection.html" title="interface in no.ntnu.fp.net.co">Connection</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../../no/ntnu/fp/net/co/Connection.html#accept()">accept</A>, <A HREF="../../../../../no/ntnu/fp/net/co/Connection.html#close()">close</A>, <A HREF="../../../../../no/ntnu/fp/net/co/Connection.html#connect(java.net.InetAddress, int)">connect</A>, <A HREF="../../../../../no/ntnu/fp/net/co/Connection.html#receive()">receive</A>, <A HREF="../../../../../no/ntnu/fp/net/co/Connection.html#send(java.lang.String)">send</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="RETRANSMIT"><!-- --></A><H3>
RETRANSMIT</H3>
<PRE>
protected static final int <B>RETRANSMIT</B></PRE>
<DL>
<DD>Time between retransmissions. When setting this, also consider setting
 <A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#TIMEOUT"><CODE>TIMEOUT</CODE></A>: There has to be time for a few retransmissions within
 the timeout. Setting RETRANSMIT too low will result in a lot of traffic
 and duplicate packets because of the delays in A2. Note: Low values of
 RETRANSMIT will generate duplicate packets independently of the setting
 for duplicate packets in the configuration for A2!
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../../constant-values.html#no.ntnu.fp.net.co.AbstractConnection.RETRANSMIT">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="TIMEOUT"><!-- --></A><H3>
TIMEOUT</H3>
<PRE>
protected static int <B>TIMEOUT</B></PRE>
<DL>
<DD>Timeout for receives. Setting this too high can cause slow operation in
 the case of many errors, while setting it too low can cause failure of
 operation because of the delays in A2. It is now set to three times the
 <A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#RETRANSMIT"><CODE>RETRANSMIT</CODE></A> value, for a total of 4 possible transmissions before
 timing out.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="state"><!-- --></A><H3>
state</H3>
<PRE>
protected <A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.State.html" title="enum in no.ntnu.fp.net.co">AbstractConnection.State</A> <B>state</B></PRE>
<DL>
<DD>Identifies the state of the connection.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="myAddress"><!-- --></A><H3>
myAddress</H3>
<PRE>
protected java.lang.String <B>myAddress</B></PRE>
<DL>
<DD>Local and remote ip-address.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="remoteAddress"><!-- --></A><H3>
remoteAddress</H3>
<PRE>
protected java.lang.String <B>remoteAddress</B></PRE>
<DL>
<DD>Local and remote ip-address.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="myPort"><!-- --></A><H3>
myPort</H3>
<PRE>
protected int <B>myPort</B></PRE>
<DL>
<DD>Local and remote port number.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="remotePort"><!-- --></A><H3>
remotePort</H3>
<PRE>
protected int <B>remotePort</B></PRE>
<DL>
<DD>Local and remote port number.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="lastValidPacketReceived"><!-- --></A><H3>
lastValidPacketReceived</H3>
<PRE>
protected KtnDatagram <B>lastValidPacketReceived</B></PRE>
<DL>
<DD>Reference to the last packet received.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="lastDataPacketSent"><!-- --></A><H3>
lastDataPacketSent</H3>
<PRE>
protected KtnDatagram <B>lastDataPacketSent</B></PRE>
<DL>
<DD>Reference to the last data packet sent.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="nextSequenceNo"><!-- --></A><H3>
nextSequenceNo</H3>
<PRE>
protected int <B>nextSequenceNo</B></PRE>
<DL>
<DD>The current sequence number used in packets to be sent.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="disconnectSeqNo"><!-- --></A><H3>
disconnectSeqNo</H3>
<PRE>
protected int <B>disconnectSeqNo</B></PRE>
<DL>
<DD>The sequence number used in disconnection.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="disconnectRequest"><!-- --></A><H3>
disconnectRequest</H3>
<PRE>
protected KtnDatagram <B>disconnectRequest</B></PRE>
<DL>
<DD>If a FIN has been received, it is stored in disconnectRequest.
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="AbstractConnection()"><!-- --></A><H3>
AbstractConnection</H3>
<PRE>
public <B>AbstractConnection</B>()</PRE>
<DL>
<DD>Initialize variables to default values.
<P>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="constructDataPacket(java.lang.String)"><!-- --></A><H3>
constructDataPacket</H3>
<PRE>
protected KtnDatagram <B>constructDataPacket</B>(java.lang.String&nbsp;payload)</PRE>
<DL>
<DD>Construct a datagram with the given payload. <br>
 <br>
 Note: This method *depends* on the values of `remotePort',
 `remoteAddress', `myPort', `myAddress' and `sequenceNo'. Failing to set
 these before calling this method causes undefined behaviour. Also note
 that if you want to set values to something else than the default, you
 must construct the packet manually or alter the returned object.<br>
 <br>
 This method also increments the sequenceNo.<br>
 <br>
 This method sets the following fields:
 <ol>
 <li>Remote address
 <li>Remote port
 <li>Local address
 <li>Local port
 <li>Flag to NONE.
 <li>Sequence no.
 <li>Payload.
 </ol>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>payload</CODE> - Payload for packet, can not be null.
<DT><B>Returns:</B><DD>Initialised datagram.</DL>
</DD>
</DL>
<HR>

<A NAME="constructInternalPacket(Flag)"><!-- --></A><H3>
constructInternalPacket</H3>
<PRE>
protected KtnDatagram <B>constructInternalPacket</B>(Flag&nbsp;flag)</PRE>
<DL>
<DD>Construct a datagram with the given flag. <br>
 <br>
 Note: This method *depends* on the values of `remotePort',
 `remoteAddress', `myPort', `myAddress' and `sequenceNo'. Failing to set
 these before calling this method causes undefined behaviour. Also note
 that if you want to set values to something else than the default, you
 must construct the packet manually or alter the returned object.<br>
 <br>
 This method also increments the sequenceNo.<br>
 <br>
 This method sets the following fields:
 <ol>
 <li>Remote address
 <li>Remote port
 <li>Local address
 <li>Local port
 <li>Flag
 <li>Sequence no.
 <li>Payload to null.
 </ol>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>flag</CODE> - Flag for the packet, see <CODE>KtnDatagram.Flag</CODE>. Setting
            this to KtnDatagram.Flag.NONE constructs a packet with no flag
            or data, and makes no sense.
<DT><B>Returns:</B><DD>Initialised flagged datagram.</DL>
</DD>
</DL>
<HR>

<A NAME="simplySendPacket(KtnDatagram)"><!-- --></A><H3>
simplySendPacket</H3>
<PRE>
protected void <B>simplySendPacket</B>(KtnDatagram&nbsp;packet)
                         throws ClException,
                                java.io.IOException</PRE>
<DL>
<DD>Sends a packet. Hides the underlying ClSocket from the students, and is
 there to clearify that there are not only the other send-methods that
 exists.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>packet</CODE> - The <CODE>KtnDatagram</CODE> to send.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - If thrown by the underlying
             <CODE>ClSocket#send(KtnDatagram)</CODE>.
<DD><CODE>ClException</CODE> - If thrown by the underlying
             <CODE>ClSocket#send(KtnDatagram)</CODE>.<DT><B>See Also:</B><DD><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#sendDataPacketWithRetransmit(KtnDatagram)"><CODE>sendDataPacketWithRetransmit(KtnDatagram)</CODE></A>, 
<A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#sendAck(KtnDatagram, boolean)"><CODE>sendAck(KtnDatagram, boolean)</CODE></A>, 
<CODE>ClSocket#send(KtnDatagram)</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="sendDataPacketWithRetransmit(KtnDatagram)"><!-- --></A><H3>
sendDataPacketWithRetransmit</H3>
<PRE>
protected KtnDatagram <B>sendDataPacketWithRetransmit</B>(KtnDatagram&nbsp;packet)
                                            throws java.io.IOException</PRE>
<DL>
<DD>Send a data packet and wait for ack in one operation. This method employs
 a timer that resends the packet until an ack is received (or the timeout
 is reached). <br>
 <br>
 This method sets the <A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#lastDataPacketSent"><CODE>lastDataPacketSent</CODE></A> variable. This method
 can only be used in the Established state, see <A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.State.html" title="enum in no.ntnu.fp.net.co"><CODE>AbstractConnection.State</CODE></A>.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>packet</CODE> - the packet to be sent.
<DT><B>Returns:</B><DD>The ack-package received for the send packet (NB: ack can be
         null)
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - thrown if unable to send packet.<DT><B>See Also:</B><DD><CODE>no.ntnu.fp.net.cl.ClSocket#send(KtnDatagram)</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="sendAck(KtnDatagram, boolean)"><!-- --></A><H3>
sendAck</H3>
<PRE>
protected void <B>sendAck</B>(KtnDatagram&nbsp;packetToAck,
                       boolean&nbsp;synAck)
                throws java.io.IOException,
                       java.net.ConnectException</PRE>
<DL>
<DD>Send an ack or synack for the given packet. <br>
 If the send fails, there is no retransmission of the ack-packet: Just
 wait for the other side to retransmit the original packet.<br>
 <br>
 This method relies on
 <A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#constructInternalPacket(Flag)"><CODE>constructInternalPacket(Flag)</CODE></A>, i.e. myAddress,
 myPort, remoteAddress, remotePort and sequenceNo must be initialized
 properly.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>packetToAck</CODE> - The packet that should be acked<DD><CODE>synAck</CODE> - true if a synack should be sent, false if a regular ack, see
            <CODE>KtnDatagram.Flag</CODE>.
<DT><B>Throws:</B>
<DD><CODE>java.net.ConnectException</CODE> - Thrown if unable to send packet.
<DD><CODE>java.io.IOException</CODE><DT><B>See Also:</B><DD><A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#constructInternalPacket(Flag)"><CODE>constructInternalPacket(Flag)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="receivePacket(boolean)"><!-- --></A><H3>
receivePacket</H3>
<PRE>
protected KtnDatagram <B>receivePacket</B>(boolean&nbsp;internal)
                             throws java.io.IOException,
                                    java.io.EOFException</PRE>
<DL>
<DD>Receives a packet from the connectionless layer. This function handles
 concurrency issues related to that only one thread may listen to a port
 at the same time.<br>
 <br>
 It calls <A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#isValid(KtnDatagram)"><CODE>isValid(KtnDatagram)</CODE></A> on FIN-packets in ESTABLISHED
 state, before an EOFException is thrown.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>internal</CODE> - true if you want to receive non-external packet, i.e. not a
            packet with data intended for the application. False
            otherwise.
<DT><B>Returns:</B><DD>A received datagram
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - If the underlying connectionless layer throws an IOException.
<DD><CODE>java.io.EOFException</CODE> - If a packet with a FIN-flag was received in ESTABLISHED
             state.</DL>
</DD>
</DL>
<HR>

<A NAME="receiveAck()"><!-- --></A><H3>
receiveAck</H3>
<PRE>
protected KtnDatagram <B>receiveAck</B>()
                          throws java.io.IOException,
                                 java.io.EOFException</PRE>
<DL>
<DD>Waits for an ACK or SYN_ACK. Blocks until the ack is recieved. Returns
 null if no ack recieved after the specified time, see
 <A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#TIMEOUT"><CODE>TIMEOUT</CODE></A>. <br>
 <br>
 If a FIN-packet is received and the state is not ESTABLISHED, this will
 also be returned.<br>
 <br>
 If a FIN-packet is received and the connection is in ESTABLISHED state,
 an EOFException is thrown. It calls <A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.html#isValid(KtnDatagram)"><CODE>isValid(KtnDatagram)</CODE></A> on
 FIN-packets in ESTABLISHED state, before an EOFException is thrown.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>The ACK or SYN_ACK KtnDatagram recieved (can be null), may also
         be a FIN if not in established state.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - If caused by the underlying connectionless layer.
<DD><CODE>java.io.EOFException</CODE> - If a FIN-packet is received in ESTABLISHED state.</DL>
</DD>
</DL>
<HR>

<A NAME="isValid(KtnDatagram)"><!-- --></A><H3>
isValid</H3>
<PRE>
protected abstract boolean <B>isValid</B>(KtnDatagram&nbsp;packet)</PRE>
<DL>
<DD>Test a packet for transmission errors. This function should only called
 in the ESTABLISHED state.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>packet</CODE> - Packet to test.
<DT><B>Returns:</B><DD>true if packet is free of errors, false otherwise.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../no/ntnu/fp/net/co/AbstractConnection.State.html" title="enum in no.ntnu.fp.net.co"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?no/ntnu/fp/net/co/AbstractConnection.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AbstractConnection.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
