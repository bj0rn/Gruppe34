package no.ntnu.fp.net.network;

import java.io.IOException;
import java.net.SocketTimeoutException;

import no.ntnu.fp.net.co.Connection;

/**
 * This class only listens for new connections
 * **/

 public abstract class Listener extends Thread {
	//Fields
	private Connection newConnection;
	private Connection server;
	
	//Constructor
	public Listener(){
		//Do nothing
	}
	
	//Run the listener
	public void run(){
		while(true){
			//This call will block
			try {
				newConnection = server.accept();
				System.out.println("Got connection");
			} catch (SocketTimeoutException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			} catch (IOException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
			//This will handle the connection
			connected(newConnection);
		}
	}
	
	public void setServer(Connection server){
		this.server = server;
	}
	
	
	 abstract void connected(Connection connection);
	//Methods 
	
	
}
